<ion-view view-title="Audio blog post" ng-controller="ViewPostCtrl">
  <ion-content>
    <h1>{{post.title}}</h1>
    <div>
      <h2>{{post.content}}</h2>
      <lgz-audio-player audio-id="post.audio_id" ng-show="post.audio_id > 0"></lgz-audio-player>
    </div>
    <ol ng-show="comments.length > 0">
      <!-- TODO: Only show comments if the post is shared OR if the post is by the current user OR the teacher -->
      <li ng-repeat="comment in comments track by $index" ng-show="post.shared || comment.user_id > 0">
        <div class="audio_comment">
          <lgz-audio-player audio-id="comment.audio_id" ng-show="comment.audio_id > 0"></lgz-audio-player>
          <div>
            <blockquote>{{comment.content}}</blockquote>
            <cite>{{comment.user.display_name}}</cite>
          </div>
          <!-- TODO: Show teacher feedback if this comment is by the current user -->
      </li>
    </ol>
    
    <form style="max-width: 500px">
      <p>Leave a comment</p>
      <div class="list list-inset">
        <p>Your name: [current user's name]</p>
        <label class="item item-input">
          <textarea placeholder="Your comment"></textarea>
        </label>
        <label class="item item-input">
          <button class="button button-outline button-assertive" ng-click="getPhoto()">
            <i class="icon ion-android-microphone"></i> Record an audio comment {{tmp}}
          </button>
        </label>
      </div>
      <button class="button button-positive">Submit your comment</button>
    </p>
  </ion-content>
</ion-view>
